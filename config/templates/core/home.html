{% extends "base.html" %}

{% block title %}Dashboard · Travel Agent{% endblock %}

{% block content %}
<section class="hero">
    <div>
        <h2>Hello{% if user.first_name %} {{ user.first_name }}{% endif %}! Your next adventure awaits.</h2>
        <p>Craft custom day-by-day plans, restaurant picks, and hidden gems powered by AI travel experts.</p>
        <a href="{% url 'core:itinerary_new' %}" class="cta-button">Start planning</a>
    </div>
    <div>
        <p><strong>Trip inspiration</strong></p>
        <ul>
            <li>Weekend city escapes</li>
            <li>Bucket-list tours</li>
            <li>Family-friendly adventures</li>
            <li>Work-from-anywhere getaways</li>
        </ul>
    </div>
</section>

<section>
    <h3 class="section-title">Your itineraries</h3>
    {% if itineraries %}
        <div class="card-grid">
            {% for itinerary in itineraries %}
                <article class="card">
                    <h4><a href="{% url 'core:itinerary_detail' itinerary.pk %}">{{ itinerary.destination }}</a></h4>
                    <div class="trip-meta">
                        <span class="trip-dates">{{ itinerary.start_date|date:"M d, Y" }} → {{ itinerary.end_date|date:"M d, Y" }}</span>
                        <span>Created {{ itinerary.created_at|date:"M d, Y H:i" }}</span>
                        <span>Style: {{ itinerary.get_preference_display }}</span>
                        {% if itinerary.interests %}
                            <span>Focus: {{ itinerary.interests|truncatechars:50 }}</span>
                        {% endif %}
                    </div>
                    <p>{{ itinerary.rendered_plan|striptags|truncatewords:40 }}</p>
                    <div class="card-actions">
                        <a href="{% url 'core:itinerary_detail' itinerary.pk %}">View details</a>
                        <a href="{% url 'core:itinerary_edit' itinerary.pk %}">Edit</a>
                        <a class="danger-link" href="{% url 'core:itinerary_delete' itinerary.pk %}">Delete</a>
                    </div>
                </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <p>No itineraries yet. Kick off your first journey with a few quick travel details.</p>
            <p><a class="cta-button" href="{% url 'core:itinerary_new' %}">Create your first itinerary</a></p>
        </div>
    {% endif %}
</section>
{% endblock %}
